# Проект "Имиджборд" 
## состояние на конец марта  

[Ссылка] []
[Ссылка]: http://iluhandric.pythonanywhere.com/

На данный момент готов черновой вариант дизайна и функциональности основных моментов сайта.
Развернута иерархия блока "Discuss" - от топиков до комментариев. Можно отметить, что, по сути,
Блок "Ask" визуально и функционально почти не отличается от вышеупомянутого (вся разница лишь
в назначении).

### Сделано:

Создано около 10 HTML - страниц, отвечающих за представление моделей и взаимодействие с ними.
Стоит упомянуть, что готовые элементы "резайзабельны" и динамически адаптируются к размеру 
окна / экрана. 
Среди таких представляемых элементов:

* Topic 
* Thread
* Comment


* Post (для "подпроекта" - симулятора блога)

Готовность основных полей этих структур подразумевает по собой весь путь от дазы данных до экрана.
То есть, 
для них были реализованы соответствующие модели-классы, описывающие параметры их представления в 
дэйтатэйблах, взаимодействие друг с другом, собственные параметры. 
В слеующем фрагменте - часть кода модели для Topic:

    title = models.CharField(max_length=100)
    logo = models.ImageField(upload_to='')
    threads = models.ManyToManyField(Thread, blank=True)

Далее, с помощью URL - представлений в Django были созданы views - функции, определяющие визуальное отображение 
объектов и переход между страницами.
Приведем в пример пару регулярных выражений из urls.py и соответствующих им views:

URLS.PY

    url(r'^forum/post/(?P<pk>[0-9]+)/edit/$', views.post_edit, name='post_edit'),
    url(r'^topic/(?P<pk>[0-9]+)/$', views.topic, name='topic'),
    url(r'^thread/(?P<pk>[0-9]+)/$', views.thread, name='thread')]
    
VIEWS.PY:
    
    def topic(request, pk):
    cur_topic = get_object_or_404(Topic, pk=pk)
    threads = cur_topic.threads.all
    form = ThreadForm(request.POST)
    if form.is_valid():
        thread = form.save(commit=False)
        try:
            identical = Thread.objects.get(topic=pk, title=thread.title)
        except Thread.DoesNotExist:
            thread.parent = pk
            thread.save()
            thread.parent = pk
            cur_topic.threads.add(thread)
            return redirect('forum.views.topic', pk=pk)
    form = ThreadForm()
    return render(request, 'forum/topic.html', {'cur_topic': cur_topic, 'threads':threads, 'form': form})
    
После сказанного, все это было подключено к templates для контекстного отображения на страницах.

Редактирование отдельных объектов, соответсвующих указанным структураам и представляющим модели, 
возможно через стандартное Django-администрирование. Но, что, важнее того, добавление новых тредов и комментариев можно осуществлять
мгновенно, используя django forms на соответствующих страницах.

Добавление комментария в THREAD.HTML:

    <div class="form-group" style="margin: 10px">
        <form method="POST" type="text" class="form" style="width:60%; ">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit" class="btn btn-default" style="background-color:#00cc99; position: relative;">
                Add comment
            </button>
        </form>
    </div>

 
### Что дальше?

Далее необходимо сделать следующее.

* Привести в порядок код, разделить его по директориями и файлам, соблюсти кодстайл
* ОЧЕНЬ тщательно подчистить репозиторий
* Дать соответствующие имена директориям
* Оптимизировать рпботу некоторых функций
* Подогнать вид и структуру проекта под нормы
* Добавить регистрацию и аутентификацию пользователей
* Добавить страницы пользователей, блокировки и разрешения
* Усложнить структуры объектов, добавив рейтинги и т.п.
* Добавить rest-api


Подводя итоги, хотелось бы отметить, что, дело на самом деле продвигается, хоть я и работаю в своем ритме, не всегда успевая
за контролем. В ближайшем времени проект заметно преобразится.

